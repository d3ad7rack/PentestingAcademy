#!/bin/bash
# Script-Stage1 - Ping live hosts to get ip-list
# Generate IP-List for use in discovery

for ip in $(seq 1 254); do
ping -c 1 192.168.0.$ip | grep "bytes from " | cut -d " " -f4 | cut -d ":" -f1 >> ips.list;
done

# Enter Script-Stage2
# NBTScan to find information from SMB Null connects

sudo nbtscan -f ips.list -h -v >> nbtscan.txt

# Enter Script-Stage3
# Scan for web servers, and get version of web server with nmap and httprint

cp /usr/share/nmap/nmap.xsl .
nmap -p80 -iL ips.list -sV -oN 80scan.nmap --stylesheet nmap.xsl
httprint -i ips.list -s /usr/bin/httprint_301/linux/signatures.txt -P0 > httprint.txt

# Enter Script-Stage4
# Enumerate SNMP Information with snmpcheck - download perl script from www.nothink.org/codes/snmpcheck/snmpcheck-1.8.pl





# Enter Script-Stage5
# 



# Enter Script-Stage6
# 



# Enter Script-Stage7
# 



# Enter Script-Stage8
# 



# Generate report.txt and cleanup
echo "List of machines that are up and responding to pings" > report.txt
echo " " >> report.txt
cat ips.list >> report.txt 2>&1
echo " "
echo " "
cat nbtscan.txt >> report.txt 2>&1
echo " "
echo " "
cat 80scan.nmap >> report.txt 2>&1
echo " "
echo " "
cat httprint.txt >> report.txt 2>&1
#
#
#
#
#
#
rm ips.list
rm nbtscan.txt
rm 80scan.nmap
rm httprint.txt
